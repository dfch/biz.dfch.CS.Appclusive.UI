@model IEnumerable<biz.dfch.CS.Appclusive.UI.Models.Core.KeyNameValue>
@using biz.dfch.CS.Appclusive.UI.App_LocalResources
@using biz.dfch.CS.Appclusive.UI.Helpers
@{
    ViewBag.Title = "KeyNameValue" + " list";
}
@section Title{
    <h2>@GeneralResources.ResourceManager.GetString("KeyNameValue")@GeneralResources.List</h2>
}
<div class="row">
    <div class="col-md-1">
        <a class="btn btn-default" href="@Url.Action("Create")"><i class="fa fa-plus"></i> @GeneralResources.CreateNew</a>
    </div>
    @using (Html.BeginForm("Index", "KeyNameValues", new { pageNr = 1 }, FormMethod.Get, new { @class = "col-md-8", @id = "searchForm", @style = "margin-bottom: 5px; margin-left: 24px;" }))
    {
        <div class="col-md-4">
            <input name="pageNr" type="hidden" value="@ViewBag.Paging.PageNr" />
            <input class="form-control text-box single-line ap-autocomplete" id="searchTerm" name="searchTerm" value="@ViewBag.SearchTerm" />
        </div>
        <input type="submit" value="@GeneralResources.Search" class="btn btn-primary" />
    }
</div>
<table class="table table-striped table-hover">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Key)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Value)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Key)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Value)
        </td>
        <td class="ap-btn text-nowrap">
            <a class="btn btn-default btn-sm" href="@Url.Action("Edit", new { id = item.Id })"><i class="fa fa-pencil "></i> @GeneralResources.EditLink</a>
            <a class="btn btn-primary btn-sm" href="@Url.Action("Details", new { id = item.Id })"><i class="fa fa-cog"></i> @GeneralResources.DetailsLink</a>
            <a class="btn btn-default btn-sm" href="@Url.Action("Delete", new { id = item.Id })" onclick="return confirm('@GeneralResources.ConfirmDelete')" title="Delete" data-toggle="tooltip"><i class="fa fa-trash-o"></i></a>
        </td>
    </tr>
    }

</table>

@using (Html.Delayed())
{
    <script type="text/javascript">
        $(document).ready(function () {
            $('#searchTerm').autocomplete(
              {
                  source: '@Url.Action("Search")',
                  select: function (event, ui) {
                      $('#searchTerm').val(ui.item.value);
                      $("#searchForm").submit();
                  }
              });
        })
    </script>
}